@{
    ViewBag.Title = "Home Page";
}
<script>
    function renderReslut() {
        var text = document.getElementById("code").value;
        var ifr = document.createElement("iframe");
        ifr.setAttribute("frameborder", "0");
        ifr.setAttribute("id", "iframeResult");
        ifr.setAttribute("name", "iframeResult");
        var wrapper = document.getElementById("wrapper-actual");
        while (wrapper.firstChild) {
            wrapper.removeChild(wrapper.firstChild);
        }

        wrapper.appendChild(ifr);
        var ifrw = (ifr.contentWindow) ? ifr.contentWindow : (ifr.contentDocument.document) ? ifr.contentDocument.document : ifr.contentDocument;
        ifrw.document.open();
        ifrw.document.write(text);
        ifrw.document.close();
    }
</script>

<div id="mySidenav" class="sidenav">
    <a id="close" href="javascript:void(0)" class="closebtn">&times;</a>
    <h1>All tasks:</h1>
    @for (int i = 0; i < ViewBag.Tasks.Count; i++)
    {
        <a href='@Url.Action("Index", "Home", new { taskId = ViewBag.Tasks[i].Id })'>@ViewBag.Tasks[i].Name</a>
    }
</div>
<div class="container-fluid" id="container">
    <div class="row sp">
        <div class="na col-md-2">
            <span id="spa">&#9776; Tasks</span>
        </div>
    </div>

    <div class="row task" id="task">
        <div class="col-md-2">
            <p>Instructions</p>
            <p>
                @ViewBag.CurrentTask.Description
            </p>
        </div>

        <div class="ma col-md-5 text-center">
            <!---- <textarea name="" id="e_sex" cols="30" rows="10" placeholder="Write code here..."></textarea> -->
            @using (Html.BeginForm("Verify", "Home", new { taskId = ViewBag.CurrentTask.Id }, FormMethod.Post))
            {
                <div id="tab">
                    <ul class="nav nav-pills">
                        <li class="active">
                            <a href="#html" data-toggle="tab">index.html</a>
                        </li>
                        <li>
                            <a href="#css" data-toggle="tab">style.css</a>
                        </li>
                    </ul>

                    <div class="tab-content clearfix">
                        <div class="tab-pane active" id="html">
                            <textarea name="htmlCode" id="code" cols="10" rows="10" onchange="renderReslut()">
                                @if (ViewBag.PreviousHtmlCode != null)
                                {
                                    @ViewBag.PreviousHtmlCode
                                }
                            </textarea>
                        </div>
                        <div class="tab-pane" id="css">
                            <textarea name="cssCode" id="css" cols="30" rows="10">@if (ViewBag.PreviousCssCode != null)
                            {@ViewBag.PreviousCssCode}</textarea>
                        </div>
                    </div>
                </div>
                    <div style="background-color:white;border-radius:2px" class="row text-center">
                        <button type="submit" id="sub" class="btn btn-primary btn-lg pull-left" style="margin:0px;border-radius:0px">
                            <span class="glyphicon glyphicon-ok"></span> Submit
                        </button>
                        <span>
                            @if (ViewBag.TaskResult == "Correct")
                            {
                                <span>Правильно</span>
                            }
                            @if (ViewBag.TaskResult == "Incorrect")
                            {
                                <span>Неправильно</span>
                            }
                        </span>
                        @if (ViewBag.TaskResult == "Correct")
                        {
                            <button type="button" class="btn btn-info btn-lg pull-right" style="margin:0px;border-radius:0px" onclick="location.href='@Url.Action("NextTask", "Home", new { taskId = ViewBag.CurrentTask.Id })'">
                                <span class="glyphicon glyphicon-circle-arrow-right"></span> Next
                            </button>
                        }
                        else
                        {
                            <button type="button" class="btn btn-info btn-lg pull-right disabled" style="margin:0px;border-radius:0px">
                                <span class="glyphicon glyphicon-circle-arrow-right"></span> Next
                            </button>
                        }
                    </div>

            }
        </div>

        <div class="col-md-5">
            <div id="tab">
                <ul class="nav nav-pills">
                    <li class="active">
                        <a href="#actual" data-toggle="tab">Actual result</a>
                    </li>
                    <li>
                        <a href="#expect" data-toggle="tab">Expected result</a>
                    </li>
                </ul>

                <div class="tab-content clearfix">
                    <div class="tab-pane active" id="actual">
                        <div id="wrapper-actual">
                            
                        </div>
                    </div>
                    <div class="tab-pane" id="expect">
                        <div id="wrapper-expected">Expected result</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    // function openNav() {
    //   document.getElementById("mySidenav").style.display = "block";
    // document.getElementById("container").style.opacity = "0.1";
    //}

    function closeNav() {
        //document.getElementById("mySidenav").style.display = "none";
        //document.getElementById("container").style.opacity = "1";

    }

    // closeNav();

</script>